var JSConfetti=function(){"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i,n){return i&&function(t,i){for(var n=0;n<i.length;n++){var o=i[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,e(o.key),o)}}(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function e(t){var i=function(t,i){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,i);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==typeof i?i:i+""}function n(t){return+t.replace(/px/,"")}function o(t,i){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=Math.random()*(i-t)+t;return Math.floor(n*Math.pow(10,e))/Math.pow(10,e)}function s(t){return t[o(0,t.length)]}var a=["#fcf403","#62fc03","#f4fc03","#03e7fc","#03fca5","#a503fc","#fc03ad","#fc03c2"];function r(t){return Math.log(t)/Math.log(1920)}var h=function(){return i(function i(e){t(this,i);var n=e.initialPosition,a=e.confettiRadius,h=e.confettiColors,c=e.emojis,u=e.emojiSize,l=e.canvasWidth,f=e.initialFlightAngle,d=e.rotationAngle,v=e.shouldHideConfettiInShiftedPosition,m=void 0!==v&&v,p=o(.9,1.7,3)*r(l);this.confettiSpeed={x:p,y:p},this.finalConfettiSpeedX=o(.2,.6,3),this.rotationSpeed=c.length?.01:o(.03,.07,3)*r(l),this.dragForceCoefficient=o(5e-4,9e-4,6),this.radius={x:a,y:a},this.initialRadius=a,this.rotationAngle=d,this.emojiSize=u,this.emojiRotationAngle=o(0,2*Math.PI),this.radiusYUpdateDirection="down",this.cos=Math.cos(f),this.sin=Math.sin(f);var y=o(-150,0);this.positionOffset={x:y*this.sin,y:y*this.cos},this.distanceTravelled={x:0,y:0};var g={x:n.x+this.positionOffset.x,y:n.y-this.positionOffset.y};this.currentPosition=Object.assign({},g),this.initialPosition=Object.assign({},g),this.color=c.length?null:s(h),this.emoji=c.length?s(c):null,this.createdAt=(new Date).getTime(),this.isVisible=!m},[{key:"draw",value:function(t){var i=this.currentPosition,e=this.radius,n=this.color,o=this.emoji,s=this.rotationAngle,a=this.emojiRotationAngle,r=this.emojiSize;if(this.isVisible){var h=window.devicePixelRatio;n?(t.fillStyle=n,t.beginPath(),t.ellipse(i.x*h,i.y*h,e.x*h,e.y*h,s,0,2*Math.PI),t.fill()):o&&(t.font="".concat(r,"px serif"),t.save(),t.translate(h*i.x,h*i.y),t.rotate(a),t.textAlign="center",t.fillText(o,0,0),t.restore())}}},{key:"updatePosition",value:function(t,i){var e=this.confettiSpeed,n=this.dragForceCoefficient,o=this.finalConfettiSpeedX,s=this.radiusYUpdateDirection,a=this.rotationSpeed,r=this.createdAt;e.x>o&&(this.confettiSpeed.x-=n*t);var h=this.currentPosition.y,c=i-r;this.currentPosition.y=this.initialPosition.y-e.y*this.cos*c+.00125*Math.pow(c,2)/2;var u={x:e.x*this.sin*t,y:this.currentPosition.y-h};this.currentPosition.x+=u.x,this.distanceTravelled.x+=Math.abs(u.x),this.distanceTravelled.y+=Math.abs(u.y),this.distanceTravelled.x>=Math.abs(this.positionOffset.x)&&this.distanceTravelled.y>=Math.abs(this.positionOffset.y)&&(this.isVisible=!0),this.rotationSpeed-=this.emoji?1e-4:1e-5*t,this.rotationSpeed<0&&(this.rotationSpeed=0),this.emoji?this.emojiRotationAngle+=this.rotationSpeed*t%(2*Math.PI):"down"===s?(this.radius.y-=t*a,this.radius.y<=0&&(this.radius.y=0,this.radiusYUpdateDirection="up")):(this.radius.y+=t*a,this.radius.y>=this.initialRadius&&(this.radius.y=this.initialRadius,this.radiusYUpdateDirection="down"))}},{key:"getIsVisibleOnCanvas",value:function(t){return this.currentPosition.y<t+100}}])}();function c(t){var i=t.confettiRadius,e=void 0===i?6:i,n=t.confettiNumber,o=void 0===n?t.confettiesNumber||(t.emojis?40:250):n,s=t.confettiColors,r=void 0===s?a:s,h=t.emojis,c=void 0===h?t.emojies||[]:h,u=t.emojiSize,l=void 0===u?80:u,f=t.confettiDispatchPosition,d=void 0===f?null:f;return t.emojies&&console.error("emojies argument is deprecated, please use emojis instead"),t.confettiesNumber&&console.error("confettiesNumber argument is deprecated, please use confettiNumber instead"),{confettiRadius:e,confettiNumber:o,confettiColors:r,emojis:c,emojiSize:l,confettiDispatchPosition:d}}function u(t){return t*Math.PI/180}function l(){return u(o(82,15))}function f(){return u(o(-15,-82))}function d(){return u(o(-150,150))}function v(){return o(0,.2,3)}function m(){return o(-.2,0,3)}var p=function(){return i(function i(e){var n=this;t(this,i),this.canvasContext=e,this.shapes=[],this.promise=new Promise(function(t){return n.resolvePromise=t})},[{key:"getBatchCompletePromise",value:function(){return this.promise}},{key:"addShapes",value:function(){var t;(t=this.shapes).push.apply(t,arguments)}},{key:"complete",value:function(){var t;return!this.shapes.length&&(null===(t=this.resolvePromise)||void 0===t||t.call(this),!0)}},{key:"processShapes",value:function(t,i,e){var n=this,o=t.timeDelta,s=t.currentTime;this.shapes=this.shapes.filter(function(t){return t.updatePosition(o,s),t.draw(n.canvasContext),!e||t.getIsVisibleOnCanvas(i)})}}])}(),y=function(){return i(function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,i),this.activeConfettiBatches=[],this.canvas=n.canvas||((e=document.createElement("canvas")).style.position="fixed",e.style.width="100%",e.style.height="100%",e.style.top="0",e.style.left="0",e.style.zIndex="1000",e.style.pointerEvents="none",document.body.appendChild(e),e),this.canvasContext=this.canvas.getContext("2d"),this.requestAnimationFrameRequested=!1,this.lastUpdated=(new Date).getTime(),this.iterationIndex=0,this.loop=this.loop.bind(this),requestAnimationFrame(this.loop)},[{key:"loop",value:function(){var t,i,e,o,s;this.requestAnimationFrameRequested=!1,t=this.canvas,i=window.devicePixelRatio,e=getComputedStyle(t),o=n(e.getPropertyValue("width")),s=n(e.getPropertyValue("height")),t.setAttribute("width",(o*i).toString()),t.setAttribute("height",(s*i).toString());var a=(new Date).getTime(),r=a-this.lastUpdated,h=this.canvas.offsetHeight,c=this.iterationIndex%10==0;this.activeConfettiBatches=this.activeConfettiBatches.filter(function(t){return t.processShapes({timeDelta:r,currentTime:a},h,c),!c||!t.complete()}),this.iterationIndex++,this.queueAnimationFrameIfNeeded(a)}},{key:"queueAnimationFrameIfNeeded",value:function(t){this.requestAnimationFrameRequested||this.activeConfettiBatches.length<1||(this.requestAnimationFrameRequested=!0,this.lastUpdated=t||(new Date).getTime(),requestAnimationFrame(this.loop))}},{key:"addConfettiAtPosition",value:function(){for(var t=c(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),i=t.confettiRadius,e=t.confettiNumber,n=t.confettiColors,o=t.emojis,s=t.emojiSize,a=t.confettiDispatchPosition,r=this.canvas.getBoundingClientRect().width,u=new p(this.canvasContext),l=0;l<e;l++){var f=new h({initialPosition:a,confettiRadius:i,confettiColors:n,confettiNumber:e,emojis:o,emojiSize:s,canvasWidth:r,rotationAngle:v(),initialFlightAngle:d(),shouldHideConfettiInShiftedPosition:!0});u.addShapes(f)}return this.activeConfettiBatches.push(u),this.queueAnimationFrameIfNeeded(),u.getBatchCompletePromise()}},{key:"addConfetti",value:function(){for(var t=c(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),i=t.confettiRadius,e=t.confettiNumber,n=t.confettiColors,o=t.emojis,s=t.emojiSize,a=this.canvas.getBoundingClientRect(),r=a.width,u=5*a.height/7,d={x:0,y:u},y={x:r,y:u},g=new p(this.canvasContext),C=0;C<e/2;C++){var P=new h({initialPosition:d,confettiRadius:i,confettiColors:n,confettiNumber:e,emojis:o,emojiSize:s,canvasWidth:r,rotationAngle:v(),initialFlightAngle:l()}),x=new h({initialPosition:y,confettiRadius:i,confettiColors:n,confettiNumber:e,emojis:o,emojiSize:s,canvasWidth:r,rotationAngle:m(),initialFlightAngle:f()});g.addShapes(x,P)}return this.activeConfettiBatches.push(g),this.queueAnimationFrameIfNeeded(),g.getBatchCompletePromise()}},{key:"clearCanvas",value:function(){this.activeConfettiBatches=[]}},{key:"destroyCanvas",value:function(){this.canvas.remove()}}])}();return y}();